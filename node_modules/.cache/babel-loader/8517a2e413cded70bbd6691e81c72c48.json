{"ast":null,"code":"import _toConsumableArray from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Row,Col,Spinner,Jumbotron,Label,Input,Button,Modal,ModalBody,ModalHeader,Table,ModalFooter}from'reactstrap';import axios from\"axios\";import{APIURL}from'../../../constants/common';import{Redirect,Link}from\"react-router-dom\";// import { Helmet } from \"react-helmet\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Map=/*#__PURE__*/function(_Component){_inherits(Map,_Component);var _super=_createSuper(Map);function Map(props){var _this;_classCallCheck(this,Map);_this=_super.call(this,props);_this.fileSelectedHandler=function(e){_this.setState({selectedFiles:[].concat(_toConsumableArray(_this.state.selectedFiles),_toConsumableArray(e.target.files))},function(){_this.uploadImage();e.target.value=null;});};_this.VideoSelectedHandler=function(e){_this.setState({selectedVideo:[].concat(_toConsumableArray(_this.state.selectedVideo),_toConsumableArray(e.target.files))},function(){_this.uploadImage();e.target.value=null;});};_this.videoLink=function(e){_this.setState({videoLink:e});};_this.handleRemoveTeamAttrs=function(item){var token=_this.state.token;if(_this.state.user){var formData=new FormData();formData.append('id',item.id);axios.post(APIURL+\"seller/delete-property-image\",formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){console.log(\"removed Image\",response.data.data);_this.setState({scsMsg:response.data.data,GalleryData:_this.state.GalleryData.filter(function(s,sidx){return item.id!==s.id;})});}).catch(function(error){_this.setState({errMsg:error.response.data.errors,Loader:false});});}};_this.uploadImage=function(){window.scrollTo(0,0);_this.ref.current.value=\"\";var tempArr=[];var token=_this.state.token;var formData=new FormData();formData.append('property_id',_this.props.data.property_id);formData.append('video_link',_this.state.videoLink);_this.state.selectedFiles.forEach(function(file){console.log(\"file >>> \",file);formData.append('upload_files[]',file);});_this.state.selectedVideo.forEach(function(video){console.log(\"file >>> \",video);formData.append('upload_video[]',video);});console.log(\"pictures >> \",tempArr);var option={headers:{'Authorization':\"Bearer \".concat(token),'content-type':'multipart/form-data'}};_this.setState({Loader:true});axios.post(APIURL+\"seller/property-gallery-update\",formData,option).then(function(result){console.log(\"result\",result);_this.setState({Loader:false,selectedFiles:[],selectedVideo:[],videoLink:\"\"},function(){_this.getGalleryImages();});}).catch(function(error){console.log(\"err\",error.response.data.error);_this.setState({errMsg:error.response.data.error,Loader:false,selectedFiles:[]});setTimeout(function(){return _this.setState({errMsg:\"\"});},3000);});};_this.ref=/*#__PURE__*/React.createRef();_this.state={user:JSON.parse(localStorage.getItem(\"userData\")),token:JSON.parse(localStorage.getItem(\"token\")),selectedFiles:[],selectedVideo:[],selectedOptions:[],Images:[],tempArr:[],GallertData:[],removeId:\"\",scsMsg:\"\",errMsg:\"\",videoLink:\"\",Loader:false};return _this;}_createClass(Map,[{key:\"componentDidMount\",value:function componentDidMount(){this.getGalleryImages();}},{key:\"getGalleryImages\",value:function getGalleryImages(){var _this2=this;this.setState({selectedFiles:[]});this.forceUpdate();var token=this.state.token;if(this.state.user){this.setState({Loader:true});var formData=new FormData();formData.append('id',this.props.data.property_id);axios.post(APIURL+\"seller/property-gallery-edit\",formData,{headers:{'Authorization':\"Bearer \".concat(token),'content-type':'multipart/form-data'}}).then(function(response){console.log(response.data.data);_this2.setState({GalleryData:response.data.data,Loader:false});}).catch(function(error){_this2.setState({errMsg:error.response.data.errors,Loader:false});});}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(React.Fragment,{children:[this.state.Loader?/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[\" \",/*#__PURE__*/_jsx(Spinner,{type:\"border\",color:\"dark\",style:{width:'3rem',height:'3rem'}}),\" \"]}):\"\",this.state.errMsg.upload_files||this.state.errMsg.upload_video?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger text-center\",role:\"alert\",children:[this.state.errMsg.upload_files,\" \",this.state.errMsg.upload_video]}):\"\",/*#__PURE__*/_jsxs(\"form\",{className:\"mt-1 card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute top-0 end-0\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return _this3.uploadImage();},className:\"btn-sm px-4 btn-rounded btn btn-info\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"label\",{className:\"card-title border-bottom w-100 pb-3\",children:\"Property Images\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group w-auto\",children:[/*#__PURE__*/_jsx(\"input\",{// style={{ lineHeight: \"2.5\" }}\ntype:\"file\",ref:this.ref,className:\"form-control form-control-sm\",multiple:true,onChange:this.fileSelectedHandler}),/*#__PURE__*/_jsx(\"span\",{children:\"(Maximum. 20 images allowed)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group multi-preview\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[this.state.scsMsg,/*#__PURE__*/_jsx(\"div\",{className:\"list-group list-group-flush\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.GalleryData&&this.state.GalleryData.filter(function(data){return data.type===\"image\";}).map(function(file,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"img-gallery\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-100 \",src:file.url_path}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"img-delete\",children:/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\"},onClick:function onClick(e){return _this3.handleRemoveTeamAttrs(file);},className:\"cursor-pointer far fa-trash-alt\"})})})]})});})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1\",children:/*#__PURE__*/_jsx(\"label\",{className:\"pb-3 card-title border-bottom w-100\",children:\"Property Video\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group w-auto\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:this.ref,className:\"form-control form-control-sm\",multiple:true,onChange:this.VideoSelectedHandler}),/*#__PURE__*/_jsx(\"span\",{children:\"(Upload one property video)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group multi-preview\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[this.state.scsMsg,/*#__PURE__*/_jsx(\"div\",{className:\"list-group list-group-flush\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.GalleryData&&this.state.GalleryData.map(function(file,index){return/*#__PURE__*/_jsx(\"div\",{children:file.type===\"video\"?/*#__PURE__*/_jsxs(\"div\",{className:\"img-gallery\",style:{width:\"200px\",height:\"200px\"},children:[/*#__PURE__*/_jsx(\"video\",{width:\"200\",height:\"200\",controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:file.url_path,type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"img-delete\",children:/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\"},onClick:function onClick(e){return _this3.handleRemoveTeamAttrs(file);},className:\"cursor-pointer far fa-trash-alt\"})})})]}):\"\"});})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-1\",children:/*#__PURE__*/_jsx(\"label\",{className:\"pb-3 card-title border-bottom w-100\",children:\"Property Video 3D\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group w-auto col-10\",children:[/*#__PURE__*/_jsx(\"input\",{style:{lineHeight:\"2.5\"},type:\"text\",placeholder:\"https://\",value:this.state.videoLink,className:\"form-control form-control-sm\",onChange:function onChange(e){return _this3.videoLink(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{children:\"(Upload a 3D video link)\"}),this.state.GalleryData&&this.state.GalleryData.filter(function(data){return data.type===\"3d_video\";}).map(function(file,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"img-gallery mt-1\",children:[file.file_path,/*#__PURE__*/_jsx(\"div\",{className:\"img-delete\",children:/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\"},onClick:function onClick(e){return _this3.handleRemoveTeamAttrs(file);},className:\"cursor_pointer far fa-trash-alt\"})})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group w-auto col-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm btn-info\",onClick:function onClick(e){return _this3.uploadImage();},children:\"Save\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group col-6\",children:/*#__PURE__*/_jsxs(Button,{className:\"btn btn-success mr-1\",onClick:function onClick(e){return _this3.props.data.handleActiveTab(\"3\");},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-left me-1\"}),\"Back to Features\"]})})})]})]});}}]);return Map;}(Component);export{Map as default};","map":{"version":3,"sources":["D:/imenso/Reactjs/real-estate-marketplace/src/components/users/Seller/Property/Gallery.js"],"names":["React","Component","Row","Col","Spinner","Jumbotron","Label","Input","Button","Modal","ModalBody","ModalHeader","Table","ModalFooter","axios","APIURL","Redirect","Link","Map","props","fileSelectedHandler","e","setState","selectedFiles","state","target","files","uploadImage","value","VideoSelectedHandler","selectedVideo","videoLink","handleRemoveTeamAttrs","item","token","user","formData","FormData","append","id","post","headers","then","response","console","log","data","scsMsg","GalleryData","filter","s","sidx","catch","error","errMsg","errors","Loader","window","scrollTo","ref","current","tempArr","property_id","forEach","file","video","option","result","getGalleryImages","setTimeout","createRef","JSON","parse","localStorage","getItem","selectedOptions","Images","GallertData","removeId","forceUpdate","width","height","upload_files","upload_video","type","map","index","url_path","cursor","lineHeight","file_path","handleActiveTab"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Row, Col, Spinner, Jumbotron, Label, Input, Button, Modal, ModalBody, ModalHeader, Table, ModalFooter } from 'reactstrap';\r\nimport axios from \"axios\";\r\nimport { APIURL } from '../../../constants/common';\r\nimport { Redirect, Link } from \"react-router-dom\";\r\n// import { Helmet } from \"react-helmet\";\r\n\r\nexport default class Map extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.ref = React.createRef();\r\n        this.state = {\r\n            user: JSON.parse(localStorage.getItem(\"userData\")),\r\n            token: JSON.parse(localStorage.getItem(\"token\")),\r\n            selectedFiles: [],\r\n            selectedVideo: [],\r\n            selectedOptions: [],\r\n            Images: [],\r\n            tempArr: [],\r\n            GallertData: [],\r\n            removeId: \"\",\r\n            scsMsg: \"\",\r\n            errMsg: \"\",\r\n            videoLink: \"\",\r\n            Loader:false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getGalleryImages()\r\n    }\r\n\r\n    fileSelectedHandler = (e) => {\r\n        this.setState({\r\n            selectedFiles: [...this.state.selectedFiles, ...e.target.files],\r\n\r\n        }, () => {\r\n            this.uploadImage();\r\n            e.target.value = null;\r\n        })\r\n\r\n    }\r\n    VideoSelectedHandler = (e) => {\r\n        this.setState({\r\n            selectedVideo: [...this.state.selectedVideo, ...e.target.files]\r\n        }, () => {\r\n            this.uploadImage();\r\n            e.target.value = null;\r\n\r\n        })\r\n\r\n    }\r\n    videoLink = (e) => {\r\n        this.setState({\r\n            videoLink: e\r\n        })\r\n\r\n    }\r\n\r\n    getGalleryImages() {\r\n        this.setState({\r\n            selectedFiles: [],\r\n        })\r\n        this.forceUpdate()\r\n        var token = this.state.token\r\n        if (this.state.user) {\r\n            this.setState({Loader:true})\r\n            const formData = new FormData();\r\n            formData.append('id', this.props.data.property_id);\r\n            axios\r\n                .post(APIURL + \"seller/property-gallery-edit\", formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'content-type': 'multipart/form-data'\r\n                    }\r\n                })\r\n                .then((response) => {\r\n                    console.log(response.data.data)\r\n                    this.setState({\r\n                        GalleryData: response.data.data,\r\n                        Loader:false\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({\r\n                        errMsg: error.response.data.errors,\r\n                        Loader: false\r\n                    })\r\n                });\r\n        }\r\n    }\r\n    handleRemoveTeamAttrs = (item) => {\r\n        var token = this.state.token\r\n        if (this.state.user) {\r\n            const formData = new FormData();\r\n            formData.append('id', item.id);\r\n            axios\r\n                .post(APIURL + \"seller/delete-property-image\", formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                    }\r\n                })\r\n                .then((response) => {\r\n                    console.log(\"removed Image\", response.data.data)\r\n                    this.setState({\r\n                        scsMsg: response.data.data,\r\n                        GalleryData: this.state.GalleryData.filter((s, sidx) => item.id !== s.id)\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({\r\n                        errMsg: error.response.data.errors,\r\n                        Loader: false\r\n                    })\r\n                });\r\n        }\r\n    }\r\n\r\n    uploadImage = () => {\r\n        window.scrollTo(0, 0);\r\n        this.ref.current.value = \"\"\r\n        const tempArr = [];\r\n        var token = this.state.token;\r\n        const formData = new FormData();\r\n        formData.append('property_id', this.props.data.property_id);\r\n        formData.append('video_link', this.state.videoLink)\r\n\r\n        this.state.selectedFiles.forEach(file => {\r\n            console.log(\"file >>> \", file);\r\n            formData.append('upload_files[]', file)\r\n        });\r\n\r\n        this.state.selectedVideo.forEach(video => {\r\n            console.log(\"file >>> \", video);\r\n            formData.append('upload_video[]', video)\r\n        });\r\n        console.log(\"pictures >> \", tempArr);\r\n        const option = {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`,\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        };\r\n        this.setState({ Loader: true })\r\n        axios\r\n            .post(APIURL + \"seller/property-gallery-update\", formData, option)\r\n            .then(result => {\r\n                console.log(\"result\", result)\r\n                this.setState({\r\n                    Loader: false,\r\n                    selectedFiles: [],\r\n                    selectedVideo: [],\r\n                    videoLink:\"\"\r\n                }, () => {\r\n                    this.getGalleryImages()\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(\"err\", error.response.data.error)\r\n                this.setState({\r\n                    errMsg: error.response.data.error,\r\n                    Loader: false,\r\n                    selectedFiles: [],\r\n                })\r\n                setTimeout(() => this.setState({\r\n                    errMsg: \"\",\r\n                }), 3000)\r\n            }\r\n            );\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.Loader ? <div className=\"loader\"> <Spinner type=\"border\" color=\"dark\" style={{ width: '3rem', height: '3rem' }} /> </div> : \"\"}\r\n                {this.state.errMsg.upload_files || this.state.errMsg.upload_video ?\r\n                    <div className=\"alert alert-danger text-center\" role=\"alert\">\r\n                        {this.state.errMsg.upload_files} {this.state.errMsg.upload_video}\r\n                    </div>\r\n                    : \"\"}\r\n                <form className=\"mt-1 card\">\r\n                    <div className='position-absolute top-0 end-0'>\r\n                        <Button onClick={(e) => this.uploadImage()} className='btn-sm px-4 btn-rounded btn btn-info'>Save</Button>\r\n                    </div>\r\n                    {/* Sub Heading */}\r\n                    <div className=\"mb-3\">\r\n                        <label className=\"card-title border-bottom w-100 pb-3\">Property Images</label>\r\n                    </div>\r\n                    {/* Sub Heading end */}\r\n                    <div className=\"form-group w-auto\">\r\n                        <input\r\n                            // style={{ lineHeight: \"2.5\" }}\r\n                            type=\"file\" ref={this.ref}\r\n                            className=\"form-control form-control-sm\"\r\n                            multiple\r\n                            onChange={this.fileSelectedHandler} />\r\n                            <span>(Maximum. 20 images allowed)</span>\r\n                    </div>\r\n                    <div className=\"form-group multi-preview\">\r\n                        <div className=\"card\">\r\n                            {this.state.scsMsg}\r\n                            <div className=\"list-group list-group-flush\">\r\n                                <div className=\"row\">\r\n                                    {this.state.GalleryData &&\r\n                                        this.state.GalleryData.filter(data => data.type === \"image\").map((file, index) => (\r\n                                            <div className=\"col-sm-3\">\r\n                                                <div className=\"img-gallery\">\r\n                                                    <img className=\"w-100 \" src={file.url_path} />\r\n                                                    <div>\r\n                                                        <div className=\"img-delete\">\r\n                                                            <i style={{ cursor: \"pointer\" }} onClick={(e) => this.handleRemoveTeamAttrs(file)} className=\"cursor-pointer far fa-trash-alt\"></i>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"my-1\">\r\n                        <label className=\"pb-3 card-title border-bottom w-100\">Property Video</label>\r\n\r\n                    </div>\r\n                    <div className=\"form-group w-auto\">\r\n                        <input\r\n                            type=\"file\" ref={this.ref}\r\n                            className=\"form-control form-control-sm\"\r\n                            multiple\r\n                            onChange={this.VideoSelectedHandler} />\r\n                            <span>(Upload one property video)</span>\r\n                    </div>\r\n                    <div className=\"form-group multi-preview\">\r\n                        <div className=\"card\">\r\n                            {this.state.scsMsg}\r\n                            <div className=\"list-group list-group-flush\">\r\n                                <div className=\"row\">\r\n                                    {this.state.GalleryData &&\r\n                                        this.state.GalleryData.map((file, index) => (\r\n                                            <div>\r\n                                                {/* <img className=\"pro_img img-fluid w-100\" src=\"https://via.placeholder.com/1200x800\" alt=\"7.jpg\" /> */}\r\n                                                {\r\n                                                    file.type === \"video\" ?\r\n                                                        <div className=\"img-gallery\" style={{ width: \"200px\", height: \"200px\" }}>\r\n                                                            <video width=\"200\" height=\"200\" controls >\r\n                                                                <source src={file.url_path} type=\"video/mp4\" />\r\n                                                            </video>\r\n                                                            <div>\r\n                                                                <div className=\"img-delete\">\r\n                                                                    <i style={{ cursor: \"pointer\" }} onClick={(e) => this.handleRemoveTeamAttrs(file)} className=\"cursor-pointer far fa-trash-alt\"></i>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        :\r\n                                                        \"\"\r\n                                                }\r\n\r\n                                            </div>\r\n\r\n                                        ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"my-1\">\r\n                        <label className=\"pb-3 card-title border-bottom w-100\">Property Video 3D</label>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className=\"form-group w-auto col-10\">\r\n                            <input\r\n                                style={{ lineHeight: \"2.5\" }}\r\n                                type=\"text\"\r\n                                placeholder='https://'\r\n                                value={this.state.videoLink}\r\n                                className=\"form-control form-control-sm\"\r\n                                onChange={(e) => this.videoLink(e.target.value)} />\r\n                                <span>(Upload a 3D video link)</span>\r\n                            {this.state.GalleryData &&\r\n                                this.state.GalleryData.filter(data => data.type === \"3d_video\").map((file, index) => (\r\n                                    <div className='img-gallery mt-1'>\r\n                                        {file.file_path}\r\n                                        <div className=\"img-delete\">\r\n                                            <i style={{ cursor: \"pointer\" }} onClick={(e) => this.handleRemoveTeamAttrs(file)} className=\"cursor_pointer far fa-trash-alt\"></i>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                ))}\r\n                        </div>\r\n                        <div className=\"form-group w-auto col-2\">\r\n                            <div className=\"form-group\">\r\n                                <Button className=\"btn-sm btn-info\" onClick={(e) => this.uploadImage()} >Save</Button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-6\">\r\n                            <Button className=\"btn btn-success mr-1\" onClick={(e) => this.props.data.handleActiveTab(\"3\")} ><i className=\"mdi mdi-arrow-left me-1\"></i>Back to Features</Button>\r\n                        </div>\r\n                    </div>\r\n                </form >\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}