{"ast":null,"code":"import _classCallCheck from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import Sidebar from'./Sidebar';import Navbar from'./Navbar';import{Button}from'reactstrap';import axios from\"axios\";import{Redirect}from'react-router-dom';import{APIURL}from'../../constants/common';import{Modal,ModalBody,ModalHeader,ModalFooter,Input,Spinner}from'reactstrap';import Pagination from\"react-js-pagination\";import Select from'react-select';import dateFormat,{masks}from\"dateformat\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var colourStyles={option:function option(styles,_ref){var data=_ref.data,isDisabled=_ref.isDisabled,isFocused=_ref.isFocused,isSelected=_ref.isSelected;return _objectSpread(_objectSpread({},styles),{},{backgroundColor:isFocused?\"#B8BCBD\":null,color:\"grey\"});}};var Property=/*#__PURE__*/function(_Component){_inherits(Property,_Component);var _super=_createSuper(Property);function Property(){var _this;_classCallCheck(this,Property);_this=_super.call(this);_this.SubmitRequest=function(e,status){_this.setState({isLoading:true});var token=_this.state.token;var formData=new FormData();formData.append('property_id',e.id);formData.append('status',status);formData.append('comment',_this.state.rejectComment);_this.setState({Loader:true,CommetModal:false});axios.post(APIURL+\"agent/update-property-assign-request-status\",formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){_this.setState({Loader:false,scsMsg:response.data.message,updateStatus:response.data.data.status});_this.getAssignedProperty();}).catch(function(error){_this.setState({errMsg:error.response.data.error,Loader:false,CommetModal:false,isLoading:false});});_this.getAssignedProperty();};_this.sideMenu=function(value){_this.setState({activeSide:value});};_this.state={token:JSON.parse(localStorage.getItem(\"token\")),user:JSON.parse(localStorage.getItem(\"userData\")),propertyRequest:[],statusArray:[{'value':\"\",\"label\":\"Status\"},{'value':\"pending\",\"label\":\"Under Review\"},{'value':\"accept\",\"label\":\"Accepted\"},{'value':\"unverify\",\"label\":\"Not Verified\"}],statusDefault:[{'value':\"\",\"label\":\"Status\"}],CommetModal:false,isLoading:false,rejectComment:\"\",errMsg:\"\",scsMsg:\"\",Loader:false,activePage:1,limit:0,totalItemsCount:0,search:\"\",status:[],sort:false,sortby:\"DESC\",columnName:\"\",activeSide:false};return _this;}_createClass(Property,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAssignedProperty();}},{key:\"SortBy\",value:function SortBy(e){var _this2=this;this.setState({sort:!this.state.sort},function(){if(_this2.state.sort){_this2.setState({sortby:\"ASC\",columnName:e},function(){_this2.getAssignedProperty();});}if(!_this2.state.sort){_this2.setState({sortby:\"DESC\",columnName:e},function(){_this2.getAssignedProperty();});}});}},{key:\"handleSearch\",value:function handleSearch(e){var _this3=this;this.setState({search:e.target.value,activePage:1},function(){setTimeout(function(){_this3.getAssignedProperty();},300);});}},{key:\"handleStatus\",value:function handleStatus(e){var _this4=this;this.setState({status:e.value,statusDefault:[{value:e.value,label:e.label}]},function(){_this4.getAssignedProperty();});}},{key:\"handlePageChange\",value:function handlePageChange(pageNumber){var _this5=this;console.log(\"active page is \".concat(pageNumber));this.setState({activePage:pageNumber},function(){_this5.getAssignedProperty();});}},{key:\"getAssignedProperty\",value:function getAssignedProperty(){var _this6=this;this.setState({Loader:true});var token=this.state.token;var formData=new FormData();formData.append('page',this.state.activePage);formData.append('search',this.state.search);formData.append('statusfilter',this.state.status);formData.append('sortby',this.state.sortby);formData.append('limit',this.state.limit);formData.append('sorttype',this.state.columnName);axios.post(APIURL+\"agent/get-assign-properties\",formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){console.log(\"agent/get-assign-properties\",response.data.data);// if (response.data.data.data && response.data.data.data.length > 0) {\n_this6.setState({propertyRequest:response.data.data.data,activePage:response.data.data.current_page,totalItemsCount:response.data.data.total,limit:response.data.data.per_page,Loader:false});// }\n});}},{key:\"CommetModal\",value:function CommetModal(e){this.setState({CommetModal:!this.state.CommetModal});}},{key:\"ModalClose\",value:function ModalClose(){this.setState({CommetModal:false});}},{key:\"rejectComment\",value:function rejectComment(e){this.setState({rejectComment:e});}},{key:\"ViewDetailsPreview\",value:function ViewDetailsPreview(e){this.setState({ViewPropertyId:e.id,goToPreview:true});}},{key:\"render\",value:function render(){var _this7=this;if(!this.state.user){return/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"});}if(this.state.goToPreview){return/*#__PURE__*/_jsx(Redirect,{to:\"/agent/property/details/\"+this.state.ViewPropertyId,push:true});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-scroller resido-admin\",children:[this.state.Loader?/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[\" \",/*#__PURE__*/_jsx(Spinner,{type:\"border\",color:\"dark\",style:{width:'3rem',height:'3rem'}}),\" \"]}):\"\",/*#__PURE__*/_jsx(Navbar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid page-body-wrapper\",children:[/*#__PURE__*/_jsx(Sidebar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide,activepage:\"Assigned_property\"}),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-uppercase\",children:\"Assigned Property\"})}),this.state.scsMsg||this.state.errMsg?/*#__PURE__*/_jsxs(\"div\",{className:this.state.scsMsg?\"alert alert-success mb-4\":\"alert alert-danger mb-4\",role:\"alert\",children:[this.state.scsMsg,\" \",this.state.errMsg.message]}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-6 col-lg-3 mb-sm-0 mb-lg-0 mb-md-0 mb-xl-0 mb-2\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",onChange:function onChange(e){return _this7.handleSearch(e);},placeholder:\"Search\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-6 col-lg-3 ml-auto\",children:/*#__PURE__*/_jsx(Select,{\"aria-label\":\".form-select-lg example\",required:\"\",placeholder:\"Select Status\",className:\"form-select-control\",options:this.state.statusArray,value:this.state.statusDefault,styles:colourStyles,onChange:function onChange(e){return _this7.handleStatus(e);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 grid-margin\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"sort-by\",style:{cursor:\"pointer\"},onClick:function onClick(e){return _this7.SortBy(\"name\");},children:\"Property Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"sort-by\",style:{cursor:\"pointer\"},onClick:function onClick(e){return _this7.SortBy(\"seller_name\");},children:\" Seller Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"sort-by\",style:{cursor:\"pointer\"},onClick:function onClick(e){return _this7.SortBy(\"created_at\");},children:\"Created Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\" Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\" Action \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.propertyRequest.length>0?this.state.propertyRequest.map(function(item,idx){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{style:{fontWeight:\"700\"},children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.seller_detail.fullName}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",dateFormat(item.created_at,'dd-mm-yyyy')]}),/*#__PURE__*/_jsx(\"td\",{children:item.propertyAssignedStatus===\"accept\"&&item.propertyVerifiedStatus===\"verify\"?/*#__PURE__*/_jsx(\"label\",{className:\"badge badge-success\",children:\"Verified\"}):item.propertyAssignedStatus===\"accept\"&&item.propertyVerifiedStatus===\"unverify\"?/*#__PURE__*/_jsx(\"label\",{className:\"badge badge-danger\",children:\"Not Verified\"}):item.propertyAssignedStatus===\"accept\"?/*#__PURE__*/_jsx(\"label\",{className:\"badge badge-success\",children:\"Accepted\"}):/*#__PURE__*/_jsx(\"label\",{className:\"badge badge-primary\",children:\"Under Review\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{size:\"sm\",type:\"button\",color:\"info\",className:\"btn-rounded\",onClick:function onClick(e){return _this7.ViewDetailsPreview(item);},children:\"View\"})})})]})});}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"text-center\",children:\"No Request Available\"})})})]})})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:this.state.totalItemsCount>0&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination-rounded\",children:/*#__PURE__*/_jsx(Pagination,{activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:5,onChange:this.handlePageChange.bind(this)})})})]})})]})]})});}}]);return Property;}(Component);export{Property as default};","map":{"version":3,"sources":["D:/imenso/Reactjs/real-estate-marketplace/src/components/users/Agent/AssignedProperty.js"],"names":["React","Component","Sidebar","Navbar","Button","axios","Redirect","APIURL","Modal","ModalBody","ModalHeader","ModalFooter","Input","Spinner","Pagination","Select","dateFormat","masks","colourStyles","option","styles","data","isDisabled","isFocused","isSelected","backgroundColor","color","Property","SubmitRequest","e","status","setState","isLoading","token","state","formData","FormData","append","id","rejectComment","Loader","CommetModal","post","headers","then","response","scsMsg","message","updateStatus","getAssignedProperty","catch","error","errMsg","sideMenu","value","activeSide","JSON","parse","localStorage","getItem","user","propertyRequest","statusArray","statusDefault","activePage","limit","totalItemsCount","search","sort","sortby","columnName","target","setTimeout","label","pageNumber","console","log","current_page","total","per_page","ViewPropertyId","goToPreview","width","height","bind","handleSearch","handleStatus","cursor","SortBy","length","map","item","idx","fontWeight","name","seller_detail","fullName","created_at","propertyAssignedStatus","propertyVerifiedStatus","ViewDetailsPreview","handlePageChange"],"mappings":"2lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,MAAT,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,KAAT,CAAgBC,SAAhB,CAA2BC,WAA3B,CAAwCC,WAAxC,CAAqDC,KAArD,CAA4DC,OAA5D,KAA2E,YAA3E,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,UAAP,EAAqBC,KAArB,KAAkC,YAAlC,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,CAEjBC,MAAM,CAAE,gBAACC,MAAD,MAAyD,IAA9CC,CAAAA,IAA8C,MAA9CA,IAA8C,CAAxCC,UAAwC,MAAxCA,UAAwC,CAA5BC,SAA4B,MAA5BA,SAA4B,CAAjBC,UAAiB,MAAjBA,UAAiB,CAC7D,sCACOJ,MADP,MAEIK,eAAe,CAAEF,SAAS,CAAG,SAAH,CAAe,IAF7C,CAGIG,KAAK,CAAE,MAHX,GAKH,CARgB,CAArB,C,GAUqBC,CAAAA,Q,oGACjB,mBAAc,0CACV,wBADU,MAwIdC,aAxIc,CAwIE,SAACC,CAAD,CAAIC,MAAJ,CAAe,CAC3B,MAAKC,QAAL,CAAc,CAAEC,SAAS,CAAE,IAAb,CAAd,EACA,GAAIC,CAAAA,KAAK,CAAG,MAAKC,KAAL,CAAWD,KAAvB,CAEA,GAAME,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,aAAhB,CAA+BR,CAAC,CAACS,EAAjC,EACAH,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAA0BP,MAA1B,EACAK,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2B,MAAKH,KAAL,CAAWK,aAAtC,EAEA,MAAKR,QAAL,CAAc,CAAES,MAAM,CAAE,IAAV,CAAgBC,WAAW,CAAE,KAA7B,CAAd,EACApC,KAAK,CACAqC,IADL,CACUnC,MAAM,CAAG,6CADnB,CACkE4B,QADlE,CAC4E,CACpEQ,OAAO,CAAE,CACL,iCAA2BV,KAA3B,CADK,CAD2D,CAD5E,EAMKW,IANL,CAMU,SAACC,QAAD,CAAc,CAChB,MAAKd,QAAL,CAAc,CACVS,MAAM,CAAE,KADE,CAEVM,MAAM,CAAED,QAAQ,CAACxB,IAAT,CAAc0B,OAFZ,CAGVC,YAAY,CAAEH,QAAQ,CAACxB,IAAT,CAAcA,IAAd,CAAmBS,MAHvB,CAAd,EAKA,MAAKmB,mBAAL,GAEH,CAdL,EAeKC,KAfL,CAeW,SAACC,KAAD,CAAW,CACd,MAAKpB,QAAL,CAAc,CACVqB,MAAM,CAAED,KAAK,CAACN,QAAN,CAAexB,IAAf,CAAoB8B,KADlB,CAEVX,MAAM,CAAE,KAFE,CAGVC,WAAW,CAAE,KAHH,CAIVT,SAAS,CAAE,KAJD,CAAd,EAMH,CAtBL,EAuBA,MAAKiB,mBAAL,GACH,CA1Ka,OA2KdI,QA3Kc,CA2KH,SAACC,KAAD,CAAW,CAClB,MAAKvB,QAAL,CAAc,CACVwB,UAAU,CAACD,KADD,CAAd,EAGH,CA/Ka,CAEV,MAAKpB,KAAL,CAAa,CACTD,KAAK,CAAEuB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CADE,CAETC,IAAI,CAAEJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAFG,CAGTE,eAAe,CAAE,EAHR,CAITC,WAAW,CAAE,CAAC,CAAE,QAAS,EAAX,CAAe,QAAS,QAAxB,CAAD,CAAqC,CAAE,QAAS,SAAX,CAAsB,QAAS,cAA/B,CAArC,CAAsF,CAAE,QAAS,QAAX,CAAqB,QAAS,UAA9B,CAAtF,CAAkI,CAAE,QAAS,UAAX,CAAuB,QAAS,cAAhC,CAAlI,CAJJ,CAKTC,aAAa,CAAE,CAAC,CAAE,QAAS,EAAX,CAAe,QAAS,QAAxB,CAAD,CALN,CAMTtB,WAAW,CAAE,KANJ,CAOTT,SAAS,CAAE,KAPF,CAQTO,aAAa,CAAE,EARN,CASTa,MAAM,CAAE,EATC,CAUTN,MAAM,CAAE,EAVC,CAWTN,MAAM,CAAE,KAXC,CAYTwB,UAAU,CAAE,CAZH,CAaTC,KAAK,CAAE,CAbE,CAcTC,eAAe,CAAE,CAdR,CAeTC,MAAM,CAAE,EAfC,CAgBTrC,MAAM,CAAE,EAhBC,CAiBTsC,IAAI,CAAE,KAjBG,CAkBTC,MAAM,CAAE,MAlBC,CAmBTC,UAAU,CAAE,EAnBH,CAoBTf,UAAU,CAAC,KApBF,CAAb,CAFU,aAwBb,C,sDAED,4BAAoB,CAChB,KAAKN,mBAAL,GACH,C,sBACD,gBAAOpB,CAAP,CAAU,iBACN,KAAKE,QAAL,CAAc,CACVqC,IAAI,CAAE,CAAC,KAAKlC,KAAL,CAAWkC,IADR,CAAd,CAEG,UAAM,CACL,GAAI,MAAI,CAAClC,KAAL,CAAWkC,IAAf,CAAqB,CACjB,MAAI,CAACrC,QAAL,CAAc,CACVsC,MAAM,CAAE,KADE,CAEVC,UAAU,CAAEzC,CAFF,CAAd,CAGG,UAAM,CACL,MAAI,CAACoB,mBAAL,GACH,CALD,EAOH,CACD,GAAI,CAAC,MAAI,CAACf,KAAL,CAAWkC,IAAhB,CAAsB,CAClB,MAAI,CAACrC,QAAL,CAAc,CACVsC,MAAM,CAAE,MADE,CAEVC,UAAU,CAAEzC,CAFF,CAAd,CAGG,UAAM,CACL,MAAI,CAACoB,mBAAL,GACH,CALD,EAMH,CACJ,CApBD,EAqBH,C,4BAED,sBAAapB,CAAb,CAAgB,iBACZ,KAAKE,QAAL,CACI,CAAEoC,MAAM,CAAEtC,CAAC,CAAC0C,MAAF,CAASjB,KAAnB,CAA0BU,UAAU,CAAE,CAAtC,CADJ,CAEM,UAAM,CACJQ,UAAU,CAAC,UAAM,CACb,MAAI,CAACvB,mBAAL,GACH,CAFS,CAEP,GAFO,CAAV,CAGH,CANL,EAOH,C,4BAGD,sBAAapB,CAAb,CAAgB,iBACZ,KAAKE,QAAL,CACI,CACID,MAAM,CAAED,CAAC,CAACyB,KADd,CAEIS,aAAa,CAAE,CAAC,CAAET,KAAK,CAAEzB,CAAC,CAACyB,KAAX,CAAkBmB,KAAK,CAAE5C,CAAC,CAAC4C,KAA3B,CAAD,CAFnB,CADJ,CAKM,UAAM,CAAE,MAAI,CAACxB,mBAAL,GAA4B,CAL1C,EAMH,C,gCAED,0BAAiByB,UAAjB,CAA6B,iBACzBC,OAAO,CAACC,GAAR,0BAA8BF,UAA9B,GACA,KAAK3C,QAAL,CACI,CAAEiC,UAAU,CAAEU,UAAd,CADJ,CAEM,UAAM,CACJ,MAAI,CAACzB,mBAAL,GACH,CAJL,EAMH,C,mCAED,8BAAsB,iBAClB,KAAKlB,QAAL,CAAc,CAAES,MAAM,CAAE,IAAV,CAAd,EACA,GAAMP,CAAAA,KAAK,CAAG,KAAKC,KAAL,CAAWD,KAAzB,CACA,GAAME,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwB,KAAKH,KAAL,CAAW8B,UAAnC,EACA7B,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAA0B,KAAKH,KAAL,CAAWiC,MAArC,EACAhC,QAAQ,CAACE,MAAT,CAAgB,cAAhB,CAAgC,KAAKH,KAAL,CAAWJ,MAA3C,EACAK,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAA0B,KAAKH,KAAL,CAAWmC,MAArC,EACAlC,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyB,KAAKH,KAAL,CAAW+B,KAApC,EACA9B,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4B,KAAKH,KAAL,CAAWoC,UAAvC,EACAjE,KAAK,CACAqC,IADL,CACUnC,MAAM,CAAG,6BADnB,CACkD4B,QADlD,CAC4D,CACpDQ,OAAO,CAAE,CACL,iCAA2BV,KAA3B,CADK,CAD2C,CAD5D,EAMKW,IANL,CAMU,SAACC,QAAD,CAAc,CAChB8B,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAA2C/B,QAAQ,CAACxB,IAAT,CAAcA,IAAzD,EACA;AACA,MAAI,CAACU,QAAL,CAAc,CACV8B,eAAe,CAAEhB,QAAQ,CAACxB,IAAT,CAAcA,IAAd,CAAmBA,IAD1B,CAEV2C,UAAU,CAAEnB,QAAQ,CAACxB,IAAT,CAAcA,IAAd,CAAmBwD,YAFrB,CAGVX,eAAe,CAAErB,QAAQ,CAACxB,IAAT,CAAcA,IAAd,CAAmByD,KAH1B,CAIVb,KAAK,CAAEpB,QAAQ,CAACxB,IAAT,CAAcA,IAAd,CAAmB0D,QAJhB,CAKVvC,MAAM,CAAE,KALE,CAAd,EAOA;AACH,CAjBL,EAkBH,C,2BAED,qBAAYX,CAAZ,CAAe,CACX,KAAKE,QAAL,CAAc,CACVU,WAAW,CAAE,CAAC,KAAKP,KAAL,CAAWO,WADf,CAAd,EAGH,C,0BAED,qBAAa,CACT,KAAKV,QAAL,CAAc,CACVU,WAAW,CAAE,KADH,CAAd,EAGH,C,6BACD,uBAAcZ,CAAd,CAAiB,CACb,KAAKE,QAAL,CAAc,CACVQ,aAAa,CAAEV,CADL,CAAd,EAGH,C,kCACD,4BAAmBA,CAAnB,CAAsB,CAClB,KAAKE,QAAL,CAAc,CACViD,cAAc,CAAEnD,CAAC,CAACS,EADR,CAEV2C,WAAW,CAAE,IAFH,CAAd,EAIH,C,sBA2CD,iBAAS,iBACL,GAAI,CAAC,KAAK/C,KAAL,CAAW0B,IAAhB,CAAsB,CAClB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAP,CACH,CACD,GAAI,KAAK1B,KAAL,CAAW+C,WAAf,CAA4B,CACxB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,2BAA6B,KAAK/C,KAAL,CAAW8C,cAAtD,CAAsE,IAAI,CAAE,IAA5E,EAAP,CACH,CACD,mBACI,kCACI,aAAK,SAAS,CAAC,iCAAf,WACK,KAAK9C,KAAL,CAAWM,MAAX,cAAoB,aAAK,SAAS,CAAC,QAAf,4BAAyB,KAAC,OAAD,EAAS,IAAI,CAAC,QAAd,CAAuB,KAAK,CAAC,MAA7B,CAAoC,KAAK,CAAE,CAAE0C,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,MAAzB,CAA3C,EAAzB,OAApB,CAAuI,EAD5I,cAEI,KAAC,MAAD,EACC,QAAQ,CAAE,KAAK9B,QAAL,CAAc+B,IAAd,CAAmB,IAAnB,CADX,CAEC,UAAU,CAAE,KAAKlD,KAAL,CAAWqB,UAFxB,EAFJ,cAKI,aAAK,SAAS,CAAC,mCAAf,wBACI,KAAC,OAAD,EACC,QAAQ,CAAE,KAAKF,QAAL,CAAc+B,IAAd,CAAmB,IAAnB,CADX,CAEC,UAAU,CAAE,KAAKlD,KAAL,CAAWqB,UAFxB,CAGC,UAAU,CAAC,mBAHZ,EADJ,cAKI,YAAK,SAAS,CAAC,YAAf,uBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,YAAK,SAAS,CAAC,qCAAf,uBACI,WAAI,SAAS,CAAC,gBAAd,+BADJ,EADJ,CAIK,KAAKrB,KAAL,CAAWY,MAAX,EAAqB,KAAKZ,KAAL,CAAWkB,MAAhC,cACG,aAAK,SAAS,CAAE,KAAKlB,KAAL,CAAWY,MAAX,CAAoB,0BAApB,CAAiD,yBAAjE,CAA4F,IAAI,CAAC,OAAjG,WACK,KAAKZ,KAAL,CAAWY,MADhB,KACyB,KAAKZ,KAAL,CAAWkB,MAAX,CAAkBL,OAD3C,GADH,CAIK,EARV,cAUI,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,+DAAf,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAAClB,CAAD,QAAO,CAAA,MAAI,CAACwD,YAAL,CAAkBxD,CAAlB,CAAP,EAA7B,CAA0D,WAAW,CAAC,QAAtE,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,kCAAf,uBACI,KAAC,MAAD,EACI,aAAW,yBADf,CAEI,QAAQ,CAAC,EAFb,CAGI,WAAW,CAAC,eAHhB,CAII,SAAS,CAAC,qBAJd,CAKI,OAAO,CAAE,KAAKK,KAAL,CAAW4B,WALxB,CAMI,KAAK,CAAE,KAAK5B,KAAL,CAAW6B,aANtB,CAOI,MAAM,CAAE7C,YAPZ,CAQI,QAAQ,CAAE,kBAACW,CAAD,QAAO,CAAA,MAAI,CAACyD,YAAL,CAAkBzD,CAAlB,CAAP,EARd,EADJ,EAJJ,GAVJ,cA2BI,YAAK,SAAS,CAAC,UAAf,uBACI,YAAK,SAAS,CAAC,oBAAf,uBACI,YAAK,SAAS,CAAC,MAAf,uBACI,YAAK,SAAS,CAAC,WAAf,uBACI,YAAK,SAAS,CAAC,kBAAf,uBACI,eAAO,SAAS,CAAC,QAAjB,wBACI,oCACI,mCACI,WAAI,SAAS,CAAC,SAAd,CAAwB,KAAK,CAAE,CAAE0D,MAAM,CAAE,SAAV,CAA/B,CAAsD,OAAO,CAAE,iBAAC1D,CAAD,QAAO,CAAA,MAAI,CAAC2D,MAAL,CAAY,MAAZ,CAAP,EAA/D,2BADJ,cAEI,WAAI,SAAS,CAAC,SAAd,CAAwB,KAAK,CAAE,CAAED,MAAM,CAAE,SAAV,CAA/B,CAAsD,OAAO,CAAE,iBAAC1D,CAAD,QAAO,CAAA,MAAI,CAAC2D,MAAL,CAAY,aAAZ,CAAP,EAA/D,0BAFJ,cAGI,WAAI,SAAS,CAAC,SAAd,CAAwB,KAAK,CAAE,CAAED,MAAM,CAAE,SAAV,CAA/B,CAAsD,OAAO,CAAE,iBAAC1D,CAAD,QAAO,CAAA,MAAI,CAAC2D,MAAL,CAAY,YAAZ,CAAP,EAA/D,0BAHJ,cAII,+BAJJ,cAKI,WAAI,SAAS,CAAC,aAAd,sBALJ,GADJ,EADJ,cAUI,uBACK,KAAKtD,KAAL,CAAW2B,eAAX,CAA2B4B,MAA3B,CAAoC,CAApC,CAAwC,KAAKvD,KAAL,CAAW2B,eAAX,CAA2B6B,GAA3B,CAA+B,SAACC,IAAD,CAAOC,GAAP,qBACpE,KAAC,KAAD,CAAO,QAAP,wBACI,YAAI,KAAK,CAAE,CAAEC,UAAU,CAAE,KAAd,CAAX,wBACI,oBAAMF,IAAI,CAACG,IAAX,EADJ,cAEI,oBAAMH,IAAI,CAACI,aAAL,CAAmBC,QAAzB,EAFJ,cAGI,0BAAOhF,UAAU,CAAC2E,IAAI,CAACM,UAAN,CAAkB,YAAlB,CAAjB,GAHJ,cAII,oBAEQN,IAAI,CAACO,sBAAL,GAAgC,QAAhC,EAA4CP,IAAI,CAACQ,sBAAL,GAAgC,QAA5E,cACI,cAAO,SAAS,CAAC,qBAAjB,sBADJ,CAGIR,IAAI,CAACO,sBAAL,GAAgC,QAAhC,EAA4CP,IAAI,CAACQ,sBAAL,GAAgC,UAA5E,cACI,cAAO,SAAS,CAAC,oBAAjB,0BADJ,CAGIR,IAAI,CAACO,sBAAL,GAAgC,QAAhC,cAEI,cAAO,SAAS,CAAC,qBAAjB,sBAFJ,cAII,cAAO,SAAS,CAAC,qBAAjB,0BAZpB,EAJJ,cAmBI,WAAI,SAAS,CAAC,aAAd,uBACI,kCACI,KAAC,MAAD,EAAQ,IAAI,CAAC,IAAb,CAAkB,IAAI,CAAC,QAAvB,CAAgC,KAAK,CAAC,MAAtC,CAA6C,SAAS,CAAC,aAAvD,CAAqE,OAAO,CAAE,iBAACrE,CAAD,QAAO,CAAA,MAAI,CAACuE,kBAAL,CAAwBT,IAAxB,CAAP,EAA9E,kBADJ,EADJ,EAnBJ,GADJ,EADoE,EAA/B,CAAxC,cA+BG,iCACI,WAAI,OAAO,CAAC,GAAZ,CAAgB,SAAS,CAAC,aAA1B,kCADJ,EAhCR,EAVJ,GADJ,EADJ,EADJ,EADJ,EADJ,EA3BJ,cAuFI,YAAK,SAAS,CAAC,+BAAf,UACK,KAAKzD,KAAL,CAAWgC,eAAX,CAA6B,CAA7B,eACG,YAAK,SAAS,CAAC,oBAAf,uBACI,KAAC,UAAD,EACI,UAAU,CAAE,KAAKhC,KAAL,CAAW8B,UAD3B,CAEI,iBAAiB,CAAE,KAAK9B,KAAL,CAAW+B,KAFlC,CAGI,eAAe,CAAE,KAAK/B,KAAL,CAAWgC,eAHhC,CAII,kBAAkB,CAAE,CAJxB,CAKI,QAAQ,CAAE,KAAKmC,gBAAL,CAAsBjB,IAAtB,CAA2B,IAA3B,CALd,EADJ,EAFR,EAvFJ,GADJ,EALJ,GALJ,GADJ,EADJ,CAuHH,C,sBAhTiCnF,S,SAAjB0B,Q","sourcesContent":["import React, { Component } from 'react'\r\nimport Sidebar from './Sidebar'\r\nimport Navbar from './Navbar'\r\nimport { Button } from 'reactstrap'\r\nimport axios from \"axios\";\r\nimport { Redirect } from 'react-router-dom'\r\nimport { APIURL } from '../../constants/common';\r\nimport { Modal, ModalBody, ModalHeader, ModalFooter, Input, Spinner } from 'reactstrap'\r\nimport Pagination from \"react-js-pagination\";\r\nimport Select from 'react-select'\r\nimport dateFormat, { masks } from \"dateformat\";\r\n\r\nconst colourStyles = {\r\n\r\n    option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n        return {\r\n            ...styles,\r\n            backgroundColor: isFocused ? \"#B8BCBD\" : null,\r\n            color: \"grey\",\r\n        };\r\n    },\r\n};\r\nexport default class Property extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            token: JSON.parse(localStorage.getItem(\"token\")),\r\n            user: JSON.parse(localStorage.getItem(\"userData\")),\r\n            propertyRequest: [],\r\n            statusArray: [{ 'value': \"\", \"label\": \"Status\" }, { 'value': \"pending\", \"label\": \"Under Review\" }, { 'value': \"accept\", \"label\": \"Accepted\" }, { 'value': \"unverify\", \"label\": \"Not Verified\" }],\r\n            statusDefault: [{ 'value': \"\", \"label\": \"Status\" }],\r\n            CommetModal: false,\r\n            isLoading: false,\r\n            rejectComment: \"\",\r\n            errMsg: \"\",\r\n            scsMsg: \"\",\r\n            Loader: false,\r\n            activePage: 1,\r\n            limit: 0,\r\n            totalItemsCount: 0,\r\n            search: \"\",\r\n            status: [],\r\n            sort: false,\r\n            sortby: \"DESC\",\r\n            columnName: \"\",\r\n            activeSide:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAssignedProperty()\r\n    }\r\n    SortBy(e) {\r\n        this.setState({\r\n            sort: !this.state.sort\r\n        }, () => {\r\n            if (this.state.sort) {\r\n                this.setState({\r\n                    sortby: \"ASC\",\r\n                    columnName: e\r\n                }, () => {\r\n                    this.getAssignedProperty()\r\n                })\r\n\r\n            }\r\n            if (!this.state.sort) {\r\n                this.setState({\r\n                    sortby: \"DESC\",\r\n                    columnName: e\r\n                }, () => {\r\n                    this.getAssignedProperty()\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSearch(e) {\r\n        this.setState(\r\n            { search: e.target.value, activePage: 1 }\r\n            , () => {\r\n                setTimeout(() => {\r\n                    this.getAssignedProperty()\r\n                }, 300);\r\n            });\r\n    }\r\n    \r\n\r\n    handleStatus(e) {\r\n        this.setState(\r\n            {\r\n                status: e.value,\r\n                statusDefault: [{ value: e.value, label: e.label }]\r\n            }\r\n            , () => { this.getAssignedProperty() });\r\n    }\r\n\r\n    handlePageChange(pageNumber) {\r\n        console.log(`active page is ${pageNumber}`);\r\n        this.setState(\r\n            { activePage: pageNumber }\r\n            , () => {\r\n                this.getAssignedProperty()\r\n            }\r\n        );\r\n    }\r\n\r\n    getAssignedProperty() {\r\n        this.setState({ Loader: true })\r\n        const token = this.state.token\r\n        const formData = new FormData();\r\n        formData.append('page', this.state.activePage);\r\n        formData.append('search', this.state.search);\r\n        formData.append('statusfilter', this.state.status);\r\n        formData.append('sortby', this.state.sortby);\r\n        formData.append('limit', this.state.limit);\r\n        formData.append('sorttype', this.state.columnName);\r\n        axios\r\n            .post(APIURL + \"agent/get-assign-properties\", formData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((response) => {\r\n                console.log(\"agent/get-assign-properties\", response.data.data)\r\n                // if (response.data.data.data && response.data.data.data.length > 0) {\r\n                this.setState({\r\n                    propertyRequest: response.data.data.data,\r\n                    activePage: response.data.data.current_page,\r\n                    totalItemsCount: response.data.data.total,\r\n                    limit: response.data.data.per_page,\r\n                    Loader: false\r\n                });\r\n                // }\r\n            });\r\n    }\r\n\r\n    CommetModal(e) {\r\n        this.setState({\r\n            CommetModal: !this.state.CommetModal,\r\n        })\r\n    }\r\n\r\n    ModalClose() {\r\n        this.setState({\r\n            CommetModal: false\r\n        })\r\n    }\r\n    rejectComment(e) {\r\n        this.setState({\r\n            rejectComment: e\r\n        })\r\n    }\r\n    ViewDetailsPreview(e) {\r\n        this.setState({\r\n            ViewPropertyId: e.id,\r\n            goToPreview: true\r\n        })\r\n    }\r\n\r\n    SubmitRequest = (e, status) => {\r\n        this.setState({ isLoading: true })\r\n        var token = this.state.token\r\n\r\n        const formData = new FormData();\r\n        formData.append('property_id', e.id);\r\n        formData.append('status', status);\r\n        formData.append('comment', this.state.rejectComment)\r\n\r\n        this.setState({ Loader: true, CommetModal: false });\r\n        axios\r\n            .post(APIURL + \"agent/update-property-assign-request-status\", formData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((response) => {\r\n                this.setState({\r\n                    Loader: false,\r\n                    scsMsg: response.data.message,\r\n                    updateStatus: response.data.data.status\r\n                });\r\n                this.getAssignedProperty()\r\n\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    errMsg: error.response.data.error,\r\n                    Loader: false,\r\n                    CommetModal: false,\r\n                    isLoading: false\r\n                })\r\n            });\r\n        this.getAssignedProperty()\r\n    };\r\n    sideMenu = (value) => {\r\n        this.setState({\r\n            activeSide:value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.user) {\r\n            return <Redirect to=\"/signin\" />;\r\n        }\r\n        if (this.state.goToPreview) {\r\n            return <Redirect to={\"/agent/property/details/\" + this.state.ViewPropertyId} push={true} />;\r\n        }\r\n        return (\r\n            <div>\r\n                <div className=\"container-scroller resido-admin\">\r\n                    {this.state.Loader ? <div className=\"loader\"> <Spinner type=\"border\" color=\"dark\" style={{ width: '3rem', height: '3rem' }} /> </div> : \"\"}\r\n                    <Navbar \r\n                     sideMenu={this.sideMenu.bind(this)}\r\n                     activeSide={this.state.activeSide}/>\r\n                    <div className=\"container-fluid page-body-wrapper\">\r\n                        <Sidebar \r\n                         sideMenu={this.sideMenu.bind(this)}\r\n                         activeSide={this.state.activeSide}\r\n                         activepage=\"Assigned_property\" />\r\n                        <div className=\"main-panel\">\r\n                            <div className=\"content-wrapper\">\r\n                                <div className=\"mb-4 d-flex justify-content-between\">\r\n                                    <h4 className=\"text-uppercase\">Assigned Property</h4>\r\n                                </div>\r\n                                {this.state.scsMsg || this.state.errMsg ?\r\n                                    <div className={this.state.scsMsg ? \"alert alert-success mb-4\" : \"alert alert-danger mb-4\"} role=\"alert\">\r\n                                        {this.state.scsMsg} {this.state.errMsg.message}\r\n                                    </div>\r\n                                    : \"\"}\r\n\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-12 col-sm-6 col-lg-3 mb-sm-0 mb-lg-0 mb-md-0 mb-xl-0 mb-2\">\r\n                                        <Input type=\"text\" onChange={(e) => this.handleSearch(e)} placeholder=\"Search\" />\r\n                                    </div>\r\n                                    <div className=\"col-12 col-sm-6 col-lg-3 ml-auto\">\r\n                                        <Select\r\n                                            aria-label=\".form-select-lg example\"\r\n                                            required=\"\"\r\n                                            placeholder=\"Select Status\"\r\n                                            className=\"form-select-control\"\r\n                                            options={this.state.statusArray}\r\n                                            value={this.state.statusDefault}\r\n                                            styles={colourStyles}\r\n                                            onChange={(e) => this.handleStatus(e)}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row mt-3\">\r\n                                    <div className=\"col-12 grid-margin\">\r\n                                        <div className=\"card\">\r\n                                            <div className=\"card-body\">\r\n                                                <div className=\"table-responsive\">\r\n                                                    <table className=\"table \">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th className=\"sort-by\" style={{ cursor: \"pointer\" }} onClick={(e) => this.SortBy(\"name\")}>Property Name</th>\r\n                                                                <th className=\"sort-by\" style={{ cursor: \"pointer\" }} onClick={(e) => this.SortBy(\"seller_name\")}> Seller Name</th>\r\n                                                                <th className=\"sort-by\" style={{ cursor: \"pointer\" }} onClick={(e) => this.SortBy(\"created_at\")}>Created Date</th>\r\n                                                                <th> Status</th>\r\n                                                                <th className=\"text-center\"> Action </th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody>\r\n                                                            {this.state.propertyRequest.length > 0 ? this.state.propertyRequest.map((item, idx) => (\r\n                                                                <React.Fragment>\r\n                                                                    <tr style={{ fontWeight: \"700\" }}>\r\n                                                                        <td >{item.name}</td>\r\n                                                                        <td >{item.seller_detail.fullName}</td>\r\n                                                                        <td > {dateFormat(item.created_at, 'dd-mm-yyyy')}</td>\r\n                                                                        <td>\r\n                                                                            {\r\n                                                                                item.propertyAssignedStatus === \"accept\" && item.propertyVerifiedStatus === \"verify\" ?\r\n                                                                                    <label className=\"badge badge-success\">Verified</label>\r\n                                                                                    :\r\n                                                                                    item.propertyAssignedStatus === \"accept\" && item.propertyVerifiedStatus === \"unverify\" ?\r\n                                                                                        <label className=\"badge badge-danger\">Not Verified</label>\r\n                                                                                        :\r\n                                                                                        item.propertyAssignedStatus === \"accept\"\r\n                                                                                            ?\r\n                                                                                            <label className=\"badge badge-success\">Accepted</label>\r\n                                                                                            :\r\n                                                                                            <label className=\"badge badge-primary\">Under Review</label>\r\n                                                                            }\r\n                                                                        </td>\r\n                                                                        <td className=\"text-center\">\r\n                                                                            <div>\r\n                                                                                <Button size=\"sm\" type=\"button\" color=\"info\" className=\"btn-rounded\" onClick={(e) => this.ViewDetailsPreview(item)} >View</Button>\r\n\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n\r\n                                                                </React.Fragment>\r\n                                                            )) :\r\n                                                                <tr>\r\n                                                                    <td colSpan=\"5\" className=\"text-center\">\r\n                                                                        No Request Available\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                            }\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"d-flex justify-content-center\">\r\n                                    {this.state.totalItemsCount > 0 &&\r\n                                        <div className=\"pagination-rounded\">\r\n                                            <Pagination\r\n                                                activePage={this.state.activePage}\r\n                                                itemsCountPerPage={this.state.limit}\r\n                                                totalItemsCount={this.state.totalItemsCount}\r\n                                                pageRangeDisplayed={5}\r\n                                                onChange={this.handlePageChange.bind(this)}\r\n                                            />\r\n                                        </div>\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}