{"ast":null,"code":"import _classCallCheck from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router';import Sidebar from'./Sidebar';import axios from\"axios\";import{APIURL}from'../../../components/constants/common';import Navbar from'./Navbar';import Button from'@restart/ui/esm/Button';import{Spinner}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChangePassword=/*#__PURE__*/function(_Component){_inherits(ChangePassword,_Component);var _super=_createSuper(ChangePassword);function ChangePassword(){var _this;_classCallCheck(this,ChangePassword);_this=_super.call(this);_this.onChangehandler=function(e,key){var userInfo=_this.state.userInfo;userInfo[e.target.name]=e.target.value;_this.setState({userInfo:userInfo});console.log(userInfo);};_this.onLogoutHandler=function(){localStorage.removeItem(\"isLoggedIn\");localStorage.removeItem(\"userData\");localStorage.clear();_this.setState({navigate:true});};_this.onSubmitHandler=function(e){var token=_this.state.token;var _this$state=_this.state,userInfo=_this$state.userInfo,user=_this$state.user;userInfo['email']=user.email;_this.setState({Loader:true});axios.post(APIURL+\"change-password/update\",_this.state.userInfo,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){_this.setState({Loader:false});_this.setState({scsMsg:response.data.message});setTimeout(function(){return _this.setState({scsMsg:\"\",current_password:\"\",password:\"\",confirm_password:\"\"});},3000);}).catch(function(error){console.log(error.response.data.error);_this.setState({errMsg:error.response.data.error,Loader:false});setTimeout(function(){return _this.setState({errMsg:\"\",current_password:\"\",password:\"\",confirm_password:\"\"});},3000);});};_this.sideMenu=function(value){_this.setState({activeSide:value});};_this.state={token:JSON.parse(localStorage.getItem(\"token\")),user:JSON.parse(localStorage.getItem(\"userData\")),user_type:localStorage.getItem(\"user_type\"),navigate:false,userInfo:{current_password:\"\",password:\"\",confirm_password:\"\"},errMsg:\"\",scsMsg:\"\",profile_image:\"\",currShowPassword:false,newShowPassword:false,confirmShowPassword:false,fullscrLoader:false,Loader:true,activeSide:false};return _this;}_createClass(ChangePassword,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.scrollTo(0,0);this.getProfileInfo();console.log(this.state.user.user_type);setTimeout(function(){_this2.setState({Loader:false});},500);}},{key:\"currShowPassword\",value:function currShowPassword(){this.setState({currShowPassword:!this.state.currShowPassword});}},{key:\"newShowPassword\",value:function newShowPassword(){this.setState({newShowPassword:!this.state.newShowPassword});}},{key:\"confirmShowPassword\",value:function confirmShowPassword(){this.setState({confirmShowPassword:!this.state.confirmShowPassword});}//form handler\n},{key:\"getProfileInfo\",value:function getProfileInfo(){var _this3=this;if(this.state.user){var formData=new FormData();// formData.append('token', this.state.token);\nformData.append('id',this.state.user.id);var token=this.state.token;var app_url=APIURL+\"admin/edit-profile\";axios.post(app_url,formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){var info=response.data.data;_this3.setState({profile_image:response.data.data.profile_image});}).catch(function(error){_this3.setState({// errMsg: error.response.data.errors,\nLoader:false});});}}},{key:\"render\",value:function render(){var _this4=this;if(!this.state.user){return/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-scroller resido-admin\",children:[this.state.Loader?/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[\" \",/*#__PURE__*/_jsx(Spinner,{type:\"border\",color:\"dark\",style:{width:'3rem',height:'3rem'}}),\" \"]}):\"\",/*#__PURE__*/_jsx(Navbar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid page-body-wrapper\",children:[/*#__PURE__*/_jsx(Sidebar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide,activePage:\"password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-uppercase\",children:\"Change Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 grid-margin stretch-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[this.state.scsMsg?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",role:\"alert\",children:[\" \",this.state.scsMsg,\" \"]}):\"\",this.state.errMsg.message?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[\"  \",this.state.errMsg.message,\"   \"]}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-6 col-md-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputName1\",children:\"Current Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",required:\"\",type:this.state.currShowPassword?\"text\":\"password\",name:\"current_password\",placeholder:\"Current Password\",value:this.state.current_password,onChange:this.onChangehandler}),this.state.currShowPassword?/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.currShowPassword();},className:\"fas fa-eye-slash\"}),\" \"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.currShowPassword();},className:\"fas fa-eye\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:this.state.errMsg.current_password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputName1\",children:\"New Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",required:\"\",type:this.state.newShowPassword?\"text\":\"password\",name:\"password\",placeholder:\"New Password\",value:this.state.password,onChange:this.onChangehandler}),this.state.newShowPassword?/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.newShowPassword();},className:\"fas fa-eye-slash\"}),\" \"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.newShowPassword();},className:\"fas fa-eye\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:this.state.errMsg.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputName1\",children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",required:\"\",type:this.state.confirmShowPassword?\"text\":\"password\",name:\"confirm_password\",placeholder:\"Confirm Password\",value:this.state.confirm_password,onChange:this.onChangehandler}),this.state.confirmShowPassword?/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.confirmShowPassword();},className:\"fas fa-eye-slash\"}),\" \"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"ad-fa-eye-pass\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return _this4.confirmShowPassword();},className:\"fas fa-eye\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:this.state.errMsg.confirm_password})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this4.onSubmitHandler();},className:\"btn btn-info \",children:\"Submit\"})})]})]})})})})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid clearfix\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-muted d-block text-center text-sm-left d-sm-inline-block\",children:\"Copyright \\xA9 website.com 2021\"})})})]})]})]})});}}]);return ChangePassword;}(Component);export{ChangePassword as default};","map":{"version":3,"sources":["D:/imenso/Reactjs/real-estate-marketplace/src/components/users/Admin/ChangePassword.js"],"names":["React","Component","Redirect","Sidebar","axios","APIURL","Navbar","Button","Spinner","ChangePassword","onChangehandler","e","key","userInfo","state","target","name","value","setState","console","log","onLogoutHandler","localStorage","removeItem","clear","navigate","onSubmitHandler","token","user","email","Loader","post","headers","then","response","scsMsg","data","message","setTimeout","current_password","password","confirm_password","catch","error","errMsg","sideMenu","activeSide","JSON","parse","getItem","user_type","profile_image","currShowPassword","newShowPassword","confirmShowPassword","fullscrLoader","window","scrollTo","getProfileInfo","formData","FormData","append","id","app_url","info","width","height","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from 'react-router';\r\nimport Sidebar from './Sidebar'\r\nimport axios from \"axios\";\r\nimport { APIURL } from '../../../components/constants/common';\r\nimport Navbar from './Navbar'\r\nimport Button from '@restart/ui/esm/Button';\r\nimport { Spinner } from 'reactstrap'\r\n\r\nexport default class ChangePassword extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            token: JSON.parse(localStorage.getItem(\"token\")),\r\n            user: JSON.parse(localStorage.getItem(\"userData\")),\r\n            user_type: localStorage.getItem(\"user_type\"),\r\n            navigate: false,\r\n            userInfo: {\r\n                current_password: \"\",\r\n                password: \"\",\r\n                confirm_password: \"\",\r\n            },\r\n            errMsg: \"\",\r\n            scsMsg: \"\",\r\n            profile_image: \"\",\r\n            currShowPassword: false,\r\n            newShowPassword: false,\r\n            confirmShowPassword: false,\r\n            fullscrLoader: false,\r\n            Loader:true,\r\n            activeSide:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0);\r\n        this.getProfileInfo()\r\n        console.log(this.state.user.user_type)\r\n        setTimeout(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tLoader:false\r\n\t\t\t})\r\n\t\t}, 500);\r\n    }\r\n\r\n    currShowPassword() {\r\n        this.setState({\r\n            currShowPassword: !this.state.currShowPassword\r\n        })\r\n    }\r\n    newShowPassword() {\r\n        this.setState({\r\n            newShowPassword: !this.state.newShowPassword\r\n        })\r\n    }\r\n    confirmShowPassword() {\r\n        this.setState({\r\n            confirmShowPassword: !this.state.confirmShowPassword\r\n        })\r\n    }\r\n\r\n    //form handler\r\n    onChangehandler = (e, key) => {\r\n        const { userInfo } = this.state;\r\n        userInfo[e.target.name] = e.target.value;\r\n        this.setState({ userInfo });\r\n        console.log(userInfo)\r\n    };\r\n\r\n\r\n    onLogoutHandler = () => {\r\n\r\n        localStorage.removeItem(\"isLoggedIn\");\r\n        localStorage.removeItem(\"userData\");\r\n        localStorage.clear();\r\n        this.setState({\r\n            navigate: true,\r\n        });\r\n    };\r\n    getProfileInfo() {\r\n        if (this.state.user) {\r\n            const formData = new FormData();\r\n            // formData.append('token', this.state.token);\r\n            formData.append('id', this.state.user.id);\r\n            var token = this.state.token\r\n            var app_url = APIURL+\"admin/edit-profile\"\r\n            axios\r\n                .post(app_url, formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`\r\n                    }\r\n                })\r\n                .then((response) => {\r\n                    const info = response.data.data;\r\n                    this.setState({\r\n                        profile_image: response.data.data.profile_image,\r\n                    })\r\n\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({\r\n                        // errMsg: error.response.data.errors,\r\n                        Loader: false\r\n                    })\r\n                });\r\n        }\r\n    }\r\n\r\n    onSubmitHandler = (e) => {\r\n        var token = this.state.token\r\n        const { userInfo, user } = this.state;\r\n        userInfo['email'] = user.email;\r\n        this.setState({ Loader: true });\r\n        axios\r\n            .post(APIURL + \"change-password/update\", this.state.userInfo, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((response) => {\r\n                this.setState({ Loader: false });\r\n                this.setState({\r\n                    scsMsg: response.data.message,\r\n                });\r\n                setTimeout(() => this.setState({\r\n                    scsMsg: \"\",\r\n                    current_password: \"\",\r\n                    password: \"\",\r\n                    confirm_password: \"\",\r\n                }), 3000);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error.response.data.error)\r\n                this.setState({\r\n                    errMsg: error.response.data.error,\r\n                    Loader: false\r\n                })\r\n                setTimeout(() => this.setState({\r\n                    errMsg: \"\",\r\n                    current_password: \"\",\r\n                    password: \"\",\r\n                    confirm_password: \"\",\r\n                }), 3000);\r\n            });\r\n    };\r\n    sideMenu = (value) => {\r\n        this.setState({\r\n            activeSide:value\r\n        })\r\n    }\r\n\r\n    render() {\r\n         if (!this.state.user) {\r\n            return <Redirect to=\"/signin\" />;\r\n        }\r\n        return (\r\n            <>\r\n               <div className=\"container-scroller resido-admin\">\r\n               {this.state.Loader ? <div className=\"loader\"> <Spinner type=\"border\" color=\"dark\" style={{ width: '3rem', height: '3rem' }} /> </div> : \"\"}\r\n              \r\n                    <Navbar \r\n                     sideMenu={this.sideMenu.bind(this)}\r\n                     activeSide={this.state.activeSide}\r\n                     />\r\n                    <div className=\"container-fluid page-body-wrapper\">\r\n                        <Sidebar \r\n                         sideMenu={this.sideMenu.bind(this)}\r\n                         activeSide={this.state.activeSide}\r\n                         activePage=\"password\" \r\n                         />\r\n                        <div className=\"main-panel\">\r\n                            <div className=\"content-wrapper\">\r\n                                <div className=\"mb-4 d-flex justify-content-between\">\r\n                                    <h4 className=\"text-uppercase\">Change Password</h4>\r\n\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-12 grid-margin stretch-card\">\r\n                                        <div className=\"card\">\r\n                                            <div className=\"card-body\">\r\n                                                {/* scsMsg  */}\r\n                                                {this.state.scsMsg ? <div className=\"alert alert-success\" role=\"alert\"> {this.state.scsMsg} </div> : \"\"}\r\n                                                {/* messgae err */}\r\n                                                {this.state.errMsg.message ? <div className=\"alert alert-danger\" role=\"alert\">  {this.state.errMsg.message}   </div> : \"\"}\r\n                                                <div className=\"col-lg-6 col-md-6\">\r\n                                                    <div className=\"form-group\">\r\n                                                        <label htmlFor=\"exampleInputName1\">Current Password</label>\r\n                                                        <div className=\"position-relative\">\r\n                                                            <input\r\n                                                                className=\"form-control\"\r\n                                                                required=\"\"\r\n                                                                type={this.state.currShowPassword ? \"text\" : \"password\"}\r\n                                                                name=\"current_password\"\r\n                                                                placeholder=\"Current Password\"\r\n                                                                value={this.state.current_password}\r\n                                                                onChange={this.onChangehandler}\r\n                                                            />\r\n                                                            {this.state.currShowPassword ?\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.currShowPassword()} className=\"fas fa-eye-slash\"></i> </span>\r\n                                                                :\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.currShowPassword()} className=\"fas fa-eye\"></i> </span>\r\n                                                            }\r\n                                                        </div>\r\n                                                        <span className=\"text-danger\">{this.state.errMsg.current_password}</span>\r\n                                                    </div>\r\n                                                    <div className=\"form-group\">\r\n                                                        <label htmlFor=\"exampleInputName1\">New Password</label>\r\n                                                        <div className=\"position-relative\">\r\n                                                            <input\r\n                                                                className=\"form-control\"\r\n                                                                required=\"\"\r\n                                                                type={this.state.newShowPassword ? \"text\" : \"password\"}\r\n                                                                name=\"password\"\r\n                                                                placeholder=\"New Password\"\r\n                                                                value={this.state.password}\r\n                                                                onChange={this.onChangehandler}\r\n                                                            />\r\n                                                            {this.state.newShowPassword ?\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.newShowPassword()} className=\"fas fa-eye-slash\"></i> </span>\r\n                                                                :\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.newShowPassword()} className=\"fas fa-eye\"></i> </span>\r\n                                                            }\r\n                                                        </div>\r\n                                                        <span className=\"text-danger\">{this.state.errMsg.password}</span>\r\n                                                    </div>\r\n                                                    <div className=\"form-group\">\r\n                                                        <label htmlFor=\"exampleInputName1\">Confirm Password</label>\r\n                                                        <div className=\"position-relative\">\r\n                                                            <input\r\n                                                                className=\"form-control\"\r\n                                                                required=\"\"\r\n                                                                type={this.state.confirmShowPassword ? \"text\" : \"password\"}\r\n                                                                name=\"confirm_password\"\r\n                                                                placeholder=\"Confirm Password\"\r\n                                                                value={this.state.confirm_password}\r\n                                                                onChange={this.onChangehandler}\r\n                                                            />\r\n                                                            {this.state.confirmShowPassword ?\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.confirmShowPassword()} className=\"fas fa-eye-slash\"></i> </span>\r\n                                                                :\r\n                                                                <span className=\"ad-fa-eye-pass\"> <i onClick={() => this.confirmShowPassword()} className=\"fas fa-eye\"></i> </span>\r\n                                                            }\r\n                                                        </div>\r\n\r\n                                                        <span className=\"text-danger\">{this.state.errMsg.confirm_password}</span>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <Button onClick={() => this.onSubmitHandler()} className=\"btn btn-info \">Submit</Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <footer className=\"footer\">\r\n                                <div className=\"container-fluid clearfix\">\r\n                                    <span className=\"text-muted d-block text-center text-sm-left d-sm-inline-block\">Copyright Â© website.com 2021</span>\r\n                                </div>\r\n                            </footer>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}