{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _classCallCheck from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"D:/imenso/Reactjs/real-estate-marketplace/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _templateObject,_templateObject2;import React,{Component}from'react';import{Redirect}from'react-router';import Sidebar from'../Sidebar';import Navbar from'../Navbar';import axios from\"axios\";import{APIURL}from'../../../constants/common';import{Button,Input,Spinner}from'reactstrap';import Select from'react-select';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Global,css}from\"@emotion/core\";import Editor from'ckeditor5-custom-build/build/ckeditor';import{CKEditor}from'@ckeditor/ckeditor5-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var colourStyles={option:function option(styles,_ref){var data=_ref.data,isDisabled=_ref.isDisabled,isFocused=_ref.isFocused,isSelected=_ref.isSelected;return _objectSpread(_objectSpread({},styles),{},{backgroundColor:isFocused?\"#B8BCBD\":null,color:\"grey\"});}};var editorConfiguration={toolbar:['heading','|','bold','italic','bulletedList','numberedList','|','undo','redo'//   '|',\n//   'imageStyle:alignLeft',\n//   'imageStyle:alignCenter',\n//    'imageStyle:alignRight',\n],ckfinder:{// Upload the images to the server using the CKFinder QuickUpload command\n// You have to change this address to your server that has the ckfinder php connector\nuploadUrl:'https://ckeditor.com/apps/ckfinder/3.5.0/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json'}};var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.ckWrapperStyle=css(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    position: relative;\\n    z-index: 1;\\n    &::before {\\n      color: rgba(251, 50, 8, 1.0);\\n      content: attr(data-placeholder);\\n      position: absolute;\\n      margin: var(--ck-spacing-large) 0;\\n      top: 0;\\n      z-index: -1;\\n    }\\n  \"])));_this.handleTitle=function(e){_this.setState({pageTitle:e});};_this.getProperties=function(){var token=_this.state.token;var formData=new FormData();formData.append('cms_id',_this.props.match.params.id);axios.post(APIURL+\"admin/edit-cms-page\",formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){console.log(\"cms\",response.data.data);var info=response.data.data;_this.setState({pageTitle:info.page_title,content:info.content});}).catch(function(error){// setTimeout(() => this.setState({ errMsg: \"\" }), 3000);\n});};_this.onSubmitHandler=function(e){window.scrollTo(0,0);var token=_this.state.token;var _this$state=_this.state,userInfo=_this$state.userInfo,user=_this$state.user;var formData=new FormData();formData.append('id',_this.props.match.params.id);formData.append('page_title',_this.state.pageTitle);formData.append('content',_this.state.content);_this.setState({Loader:true});axios.post(APIURL+\"admin/update-cms-page\",formData,{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){_this.setState({scsMsg:response.data.message,Loader:false// redirectback: true\n});_this.UpdateSuccessfully(_this.state.scsMsg);}).catch(function(error){_this.setState({errMsg:error.response.data.error,Loader:false});});};_this.UpdateSuccessfully=function(e){return toast.success(e,{position:\"top-right\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,icon:false,theme:\"colored\",onClose:function onClose(){return _this.setState({redirectback:true});}});};_this.sideMenu=function(value){_this.setState({activeSide:value});};_this.state={token:JSON.parse(localStorage.getItem(\"token\")),user:JSON.parse(localStorage.getItem(\"userData\")),pageTitle:\"\",content:\"\",errMsg:\"\",scsMsg:\"\",Loader:true,redirectback:false,activeSide:false};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getProperties();window.scrollTo(0,0);setTimeout(function(){_this2.setState({Loader:false});},500);}},{key:\"handleChangeText\",value:function handleChangeText(event){this.setState({content:event});console.log(this.state.text);}},{key:\"render\",value:function render(){var _this3=this;if(!this.state.user){return/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"});}if(this.state.redirectback){return/*#__PURE__*/_jsx(Redirect,{to:\"/cms\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-scroller resido-admin\",children:[this.state.Loader?/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[\" \",/*#__PURE__*/_jsx(Spinner,{type:\"border\",color:\"dark\",style:{width:'3rem',height:'3rem'}}),\" \"]}):\"\",/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:3000,hideProgressBar:true,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true}),/*#__PURE__*/_jsx(Navbar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid page-body-wrapper\",children:[/*#__PURE__*/_jsx(Sidebar,{sideMenu:this.sideMenu.bind(this),activeSide:this.state.activeSide,activePage:\"contractToBuyer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-uppercase\",children:this.state.pageTitle})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 grid-margin stretch-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"forms-sample\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-lg-12 col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputName1\",children:\"Page Content\"}),/*#__PURE__*/_jsx(Global,{styles:css(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n                                            :root {\\n                                                \\n                                            --ck-border-radius: 4px;\\n                                            --ck-color-focus-border: rgba(142, 140, 140, 0.25);\\n                                            --ck-color-shadow-inner: rgba(142, 140, 140, 1);\\n                                            --ck-inner-shadow: 0 0 0 2px var(--ck-color-shadow-inner);\\n                                            --ck-spacing-large: var(--ck-spacing-standard);\\n                                            height: 200px;\\n                                            }\\n                                            .ck.ck-editor__editable_inline {\\n                                            border: 1px solid rgba(142, 140, 140, 0.25);\\n                                            transition: all 0.3s;\\n                                            color: rgba(19, 19, 18, 1);\\n                                            height: 200px;\\n                                            &:hover {\\n                                                border-color: rgba(19, 19, 18, 0.25);\\n                                                border-right-width: 1px !important;\\n                                              color: rgba(19, 19, 18, 1); !important;\\n\\n                                            }\\n                                            }\\n                                            .ck-editor__editable.ck-read-only {\\n                                              color: rgba(19, 19, 18, 1);;\\n                                            opacity: 1;\\n                                            cursor: not-allowed;\\n                                             color: rgba(19, 19, 18, 1);\\n                                             height: 200px;\\n                                            &:hover {\\n                                                border-color: rgba(142, 140, 140, 0.25);\\n                                            }\\n                                            }\\n                                        \"])))}),/*#__PURE__*/_jsx(CKEditor,{editor:Editor,config:editorConfiguration,data:this.state.content,onReady:function onReady(editor){// You can store the \"editor\" and use when it is needed.\nconsole.log('Editor is ready to use!',editor);},onChange:function onChange(event,editor){var data=editor.getData();_this3.handleChangeText(data);console.log({event:event,editor:editor,data:data});},onBlur:function onBlur(event,editor){console.log('Blur.',editor);},onFocus:function onFocus(event,editor){console.log('Focus.',editor);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:this.state.errMsg.contract_title})]})}),/*#__PURE__*/_jsx(Button,{color:\"info\",className:\"btn btn-info mr-2\",onClick:function onClick(){return _this3.onSubmitHandler();},children:\"Update\"})]})})})})})})]})})]})]})});}}]);return Profile;}(Component);export{Profile as default};","map":{"version":3,"sources":["D:/imenso/Reactjs/real-estate-marketplace/src/components/users/Admin/Cms/EditPage.js"],"names":["React","Component","Redirect","Sidebar","Navbar","axios","APIURL","Button","Input","Spinner","Select","ToastContainer","toast","Global","css","Editor","CKEditor","colourStyles","option","styles","data","isDisabled","isFocused","isSelected","backgroundColor","color","editorConfiguration","toolbar","ckfinder","uploadUrl","Profile","props","ckWrapperStyle","handleTitle","e","setState","pageTitle","getProperties","token","state","formData","FormData","append","match","params","id","post","headers","then","response","console","log","info","page_title","content","catch","error","onSubmitHandler","window","scrollTo","userInfo","user","Loader","scsMsg","message","UpdateSuccessfully","errMsg","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","icon","theme","onClose","redirectback","sideMenu","value","activeSide","JSON","parse","localStorage","getItem","setTimeout","event","text","width","height","bind","editor","getData","handleChangeText","contract_title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from 'react-router';\r\nimport Sidebar from '../Sidebar'\r\nimport Navbar from '../Navbar'\r\nimport axios from \"axios\";\r\nimport { APIURL } from '../../../constants/common';\r\nimport { Button, Input, Spinner } from 'reactstrap'\r\nimport Select from 'react-select'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Global, css } from \"@emotion/core\";\r\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react'\r\n\r\nconst colourStyles = {\r\n    option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n        return {\r\n            ...styles,\r\n            backgroundColor: isFocused ? \"#B8BCBD\" : null,\r\n            color: \"grey\",\r\n        };\r\n    }\r\n};\r\nconst editorConfiguration = {\r\n    toolbar: [ \r\n        'heading',\r\n      '|',\r\n      'bold',\r\n      'italic',\r\n      'bulletedList',\r\n      'numberedList',\r\n      '|',\r\n      'undo',\r\n      'redo',\r\n    //   '|',\r\n    //   'imageStyle:alignLeft',\r\n    //   'imageStyle:alignCenter',\r\n    //    'imageStyle:alignRight',\r\n       ] ,\r\n    ckfinder: {\r\n      // Upload the images to the server using the CKFinder QuickUpload command\r\n      // You have to change this address to your server that has the ckfinder php connector\r\n      uploadUrl: 'https://ckeditor.com/apps/ckfinder/3.5.0/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json'\r\n  }\r\n};\r\n\r\n\r\nexport default class Profile extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            token: JSON.parse(localStorage.getItem(\"token\")),\r\n            user: JSON.parse(localStorage.getItem(\"userData\")),\r\n            pageTitle: \"\",\r\n            content: \"\",\r\n            errMsg: \"\",\r\n            scsMsg: \"\",\r\n            Loader: true,\r\n            redirectback: false,\r\n            activeSide:false\r\n        }\r\n    }\r\n    ckWrapperStyle = css`\r\n    position: relative;\r\n    z-index: 1;\r\n    &::before {\r\n      color: rgba(251, 50, 8, 1.0);\r\n      content: attr(data-placeholder);\r\n      position: absolute;\r\n      margin: var(--ck-spacing-large) 0;\r\n      top: 0;\r\n      z-index: -1;\r\n    }\r\n  `;\r\n\r\n    componentDidMount() {\r\n        this.getProperties()\r\n        window.scrollTo(0, 0);\r\n        setTimeout(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tLoader:false\r\n\t\t\t})\r\n\t\t}, 500);\r\n    }\r\n\r\n\r\n\r\n    handleTitle = (e) => {\r\n        this.setState({\r\n            pageTitle: e\r\n        });\r\n    };\r\n   \r\n    handleChangeText(event) {\r\n        this.setState({\r\n            content: event\r\n        })\r\n        console.log(this.state.text)\r\n    }\r\n\r\n    getProperties = () => {\r\n        var token = this.state.token\r\n        const formData = new FormData();\r\n        formData.append('cms_id', this.props.match.params.id);\r\n        axios\r\n            .post(APIURL + \"admin/edit-cms-page\", formData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((response) => {\r\n                console.log(\"cms\", response.data.data)\r\n                const info = response.data.data\r\n                this.setState({\r\n                    pageTitle: info.page_title,\r\n                    content: info.content\r\n                })\r\n            })\r\n            .catch((error) => {\r\n                // setTimeout(() => this.setState({ errMsg: \"\" }), 3000);\r\n            });\r\n    };\r\n\r\n    onSubmitHandler = (e) => {\r\n        window.scrollTo(0, 0);\r\n        var token = this.state.token\r\n        const { userInfo, user } = this.state;\r\n        const formData = new FormData();\r\n        formData.append('id', this.props.match.params.id);\r\n        formData.append('page_title', this.state.pageTitle);\r\n        formData.append('content', this.state.content);\r\n\r\n        this.setState({ Loader: true });\r\n        axios\r\n            .post(APIURL + \"admin/update-cms-page\", formData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .then((response) => {\r\n                this.setState({\r\n                    scsMsg: response.data.message,\r\n                    Loader: false,\r\n                    // redirectback: true\r\n                })\r\n                this.UpdateSuccessfully(this.state.scsMsg)\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    errMsg: error.response.data.error,\r\n                    Loader: false\r\n                })\r\n            });\r\n    };\r\n    UpdateSuccessfully = (e) => toast.success(e, {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        icon: false,\r\n        theme: \"colored\",\r\n        onClose: () =>\r\n            this.setState({\r\n                redirectback: true\r\n            })\r\n    })\r\n    sideMenu = (value) => {\r\n        this.setState({\r\n            activeSide:value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.user) {\r\n            return <Redirect to=\"/signin\" />;\r\n        }\r\n        if (this.state.redirectback) {\r\n            return <Redirect to=\"/cms\" />;\r\n        }\r\n        return (\r\n            <>\r\n                <div className=\"container-scroller resido-admin\">\r\n                    {this.state.Loader ? <div className=\"loader\"> <Spinner type=\"border\" color=\"dark\" style={{ width: '3rem', height: '3rem' }} /> </div> : \"\"}\r\n                    <ToastContainer\r\n                        position=\"top-right\"\r\n                        autoClose={3000}\r\n                        hideProgressBar={true}\r\n                        newestOnTop={false}\r\n                        closeOnClick\r\n                        rtl={false}\r\n                        pauseOnFocusLoss\r\n                        draggable\r\n                        pauseOnHover\r\n                    />\r\n                    <Navbar\r\n                     sideMenu={this.sideMenu.bind(this)}\r\n                     activeSide={this.state.activeSide}\r\n                      />\r\n                    <div className=\"container-fluid page-body-wrapper\">\r\n                        <Sidebar \r\n                         sideMenu={this.sideMenu.bind(this)}\r\n                         activeSide={this.state.activeSide}\r\n                         activePage=\"contractToBuyer\" \r\n                         />\r\n                        <div className=\"main-panel\">\r\n                            <div className=\"content-wrapper\">\r\n                                <div className=\"mb-4 d-flex justify-content-between\">\r\n                                    <h4 className=\"text-uppercase\">{this.state.pageTitle}</h4>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-12 grid-margin stretch-card\">\r\n                                        <div className=\"card\">\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-body\">\r\n                                                    <form className=\"forms-sample\">\r\n                                                        {/* <div className=\"row\">\r\n                                                            <div className=\"form-group col-lg-12 col-12\">\r\n                                                                <label htmlFor=\"exampleInputName1\">Contract Title</label>\r\n                                                                <input\r\n                                                                    className=\"form-control\"\r\n                                                                    type=\"text\"\r\n                                                                    placeholder=\"Contract Title\"\r\n                                                                    value={this.state.pageTitle}\r\n                                                                    onChange={(e) => this.handleTitle(e.target.value)}\r\n                                                                />\r\n                                                                <span className=\"text-danger\">{this.state.errMsg.contract_title}</span>\r\n                                                            </div>\r\n                                                        </div> */}\r\n                                                        <div className=\"row\">\r\n                                                            <div className=\"form-group col-lg-12 col-12\">\r\n                                                                <label htmlFor=\"exampleInputName1\">Page Content</label>\r\n                                                                <Global\r\n                                                    styles={css`\r\n                                            :root {\r\n                                                \r\n                                            --ck-border-radius: 4px;\r\n                                            --ck-color-focus-border: rgba(142, 140, 140, 0.25);\r\n                                            --ck-color-shadow-inner: rgba(142, 140, 140, 1);\r\n                                            --ck-inner-shadow: 0 0 0 2px var(--ck-color-shadow-inner);\r\n                                            --ck-spacing-large: var(--ck-spacing-standard);\r\n                                            height: 200px;\r\n                                            }\r\n                                            .ck.ck-editor__editable_inline {\r\n                                            border: 1px solid rgba(142, 140, 140, 0.25);\r\n                                            transition: all 0.3s;\r\n                                            color: rgba(19, 19, 18, 1);\r\n                                            height: 200px;\r\n                                            &:hover {\r\n                                                border-color: rgba(19, 19, 18, 0.25);\r\n                                                border-right-width: 1px !important;\r\n                                              color: rgba(19, 19, 18, 1); !important;\r\n\r\n                                            }\r\n                                            }\r\n                                            .ck-editor__editable.ck-read-only {\r\n                                              color: rgba(19, 19, 18, 1);;\r\n                                            opacity: 1;\r\n                                            cursor: not-allowed;\r\n                                             color: rgba(19, 19, 18, 1);\r\n                                             height: 200px;\r\n                                            &:hover {\r\n                                                border-color: rgba(142, 140, 140, 0.25);\r\n                                            }\r\n                                            }\r\n                                        `}\r\n                                                />\r\n                                                <CKEditor\r\n\t\t\t\t\t\t\t\t                    editor={ Editor }\r\n\t\t\t\t\t\t\t\t                    config={ editorConfiguration }\r\n\t\t\t\t\t\t\t\t                    data={this.state.content}\r\n\t\t\t\t\t\t\t\t                    onReady={ editor => {\r\n\t\t\t\t\t\t\t\t                        // You can store the \"editor\" and use when it is needed.\r\n\t\t\t\t\t\t\t\t                        console.log( 'Editor is ready to use!', editor );\r\n\t\t\t\t\t\t\t\t                    } }\r\n\t\t\t\t\t\t\t\t                    onChange={(event, editor) => {\r\n\t\t\t\t\t\t\t\t                        const data = editor.getData();\r\n\t\t\t\t\t\t\t\t                        this.handleChangeText(data)\r\n\t\t\t\t\t\t\t\t                        console.log({ event, editor, data });\r\n\t\t\t\t\t\t\t\t                    }}\r\n\r\n\t\t\t\t\t\t\t\t                    onBlur={ ( event, editor ) => {\r\n\t\t\t\t\t\t\t\t                        console.log( 'Blur.', editor );\r\n\t\t\t\t\t\t\t\t                    } }\r\n\t\t\t\t\t\t\t\t                    onFocus={ ( event, editor ) => {\r\n\t\t\t\t\t\t\t\t                        console.log( 'Focus.', editor );\r\n\t\t\t\t\t\t\t\t                    } }\r\n\t\t\t\t\t\t\t\t                />\r\n                                                                {/* <textarea\r\n                                                                    className=\"form-control\"\r\n                                                                    type=\"textarea\"\r\n                                                                    rows={10}\r\n                                                                    placeholder=\"Page Content\"\r\n                                                                    value={this.state.content}\r\n                                                                    onChange={(e) => this.handleContent(e.target.value)}\r\n                                                                /> */}\r\n                                                                <span className=\"text-danger\">{this.state.errMsg.contract_title}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <Button\r\n                                                            color=\"info\"\r\n                                                            className=\"btn btn-info mr-2\"\r\n                                                            onClick={() => this.onSubmitHandler()}\r\n                                                        >Update</Button>\r\n                                                    </form>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}